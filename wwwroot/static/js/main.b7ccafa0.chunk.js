(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{52:function(e,t,a){},73:function(e,t,a){e.exports=a(93)},92:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);a(74);var n=a(0),r=a.n(n),s=a(9),l=a(17),o=a(41),c=a(16),i=a(30),m=a(58),d=a(51);let u=!1,p="token",E="https://localhost/users/authenticate",h="https://localhost/users/register",g="https://localhost/users",f="Login Successfully.",y="Incorrect username or password.",b="Sign up Successfully.",S="Invalid username. ",T="Invalid password. ";function w(e,t,a){!function(e,t,a,n,r){let s={"Content-Type":"application/json",Authorization:t?"Bearer ".concat(t):""},l=0;fetch(e,{method:"GET",headers:new Headers(s)}).then(e=>r||(l=e.status,e.json())).then(e=>{200!==l&&n?n(e):a(e)}).catch(e=>{console.log("Auth Error: "+e),n&&n(e)})}(g,e,t,a,u?{id:1,username:"shirley",firstName:"Shirley",lastName:"ZHANG"}:null)}function N(e,t,a,n,r,s){let l={"Content-Type":"application/json",Authorization:t?"Bearer ".concat(t):""},o=0;fetch(e,{method:"POST",headers:new Headers(l),body:a}).then(e=>s||(o=e.status,e.json())).then(e=>{200!==o?r({...e,status:o}):n(e)}).catch(e=>{console.log("POST Error: "+e),r(e)})}const O={requestData:e=>(t,a)=>{const n=a();n&&n.data&&(w(e,e=>{t({type:"RECEIVE_DATA",data:e})},null),t({type:"REQUEST_DATA"}))}},x={data:[],isLoading:!1},I={setUsername:e=>({type:"SET_USERNAME",payload:e}),setPassword:e=>({type:"SET_PASSWORD",payload:e}),setIsButtonDisabled:e=>({type:"SET_BUTTON_DISABLED",payload:e}),loginSuccess:e=>({type:"LOGIN_SUCCESS",payload:e}),loginFailed:e=>({type:"LOGIN_FAILED",payload:e}),setIsError:e=>({type:"SET_ERROR",payload:e}),reset:()=>({type:"RESET"})},v={login:(e,t)=>{const a={username:"",password:"",isButtonDisabled:!0,helperText:"",isError:!1};if(void 0===e)return a;const n=t;switch(n.type){case"SET_USERNAME":return{...e,username:n.payload};case"SET_PASSWORD":return{...e,password:n.payload};case"SET_BUTTON_DISABLED":return{...e,isButtonDisabled:n.payload};case"LOGIN_SUCCESS":return{...e,helperText:n.payload,isError:!1};case"LOGIN_FAILED":return{...e,helperText:n.payload,isError:!0};case"SET_ERROR":return{...e,isError:n.payload};case"RESET":return a;default:return e}},signup:(e,t)=>{const a={firstname:"",lastname:"",username:"",password:"",isButtonDisabled:!0,helperText:"",isError:!1};if(void 0===e)return a;const n=t;switch(n.type){case"SET_FIRSTNAME":return{...e,firstname:n.payload};case"SET_LASTNAME":return{...e,lastname:n.payload};case"SET_USERNAME":return{...e,username:n.payload};case"SET_PASSWORD":return{...e,password:n.payload};case"SET_BUTTON_DISABLED":return{...e,isButtonDisabled:n.payload};case"SIGNUP_SUCCESS":return{...e,helperText:n.payload,isError:!1};case"SIGNUP_FAILED":return{...e,helperText:n.payload,isError:!0};case"SET_ERROR":return{...e,isError:n.payload};case"RESET":return a;default:return e}},data:(e,t)=>{if(void 0===e)return x;const a=t;switch(a.type){case"REQUEST_DATA":return{data:e.data,isLoading:!0};case"RECEIVE_DATA":return{data:a.data,isLoading:!1}}return e}};var _=a(13),D=a(123),A=a(122),k=a(124),U=a(125),R=a(137),j=a(126),L=a(127),B=a(25);a(52);class C extends n.PureComponent{constructor(){super(...arguments),this.state={isOpen:!1},this.toggle=()=>{this.setState({isOpen:!this.state.isOpen})}}render(){return n.createElement("header",null,n.createElement(A.a,{className:"navbar-expand-sm navbar-toggleable-sm border-bottom box-shadow mb-3",light:!0},n.createElement(D.a,null,n.createElement(k.a,{tag:B.a,to:"/"},"WebApp"),n.createElement(U.a,{onClick:this.toggle,className:"mr-2"}),n.createElement(R.a,{className:"d-sm-inline-flex flex-sm-row-reverse",isOpen:this.state.isOpen,navbar:!0},n.createElement("ul",{className:"navbar-nav flex-grow"},n.createElement(j.a,null,n.createElement(L.a,{tag:B.a,className:"text-dark",to:"/login"},"Log in")),n.createElement(j.a,null,n.createElement(L.a,{tag:B.a,className:"text-dark",to:"/signup"},"Sign up")))))))}}var P=e=>n.createElement(n.Fragment,null,n.createElement(C,null),n.createElement(D.a,null,e.children));function F(){const[e,t]=Object(n.useState)((()=>{const e=sessionStorage.getItem(p),t=e&&JSON.parse(e);return t&&t.token})());return{setToken:e=>{e?(sessionStorage.setItem(p,JSON.stringify(e)),t(e.token)):(sessionStorage.setItem(p,""),t(""))},token:e}}var W=Object(l.c)(e=>e.data,O)(e=>{const{token:t}=F();return n.useEffect(()=>{e.requestData(t)},[]),n.createElement(n.Fragment,null,n.createElement("h1",{id:"tabelLabel"},"Registered Users"),n.createElement("p",null,"This component demonstrates fetching data from the server."),n.createElement("table",{className:"table table-striped","aria-labelledby":"tabelLabel"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"User ID"),n.createElement("th",null,"First Name"),n.createElement("th",null,"Last Name"),n.createElement("th",null,"Username"))),n.createElement("tbody",null,e.data&&e.data.map(e=>n.createElement("tr",{key:e.username},n.createElement("td",null,e.id),n.createElement("td",null,e.firstName),n.createElement("td",null,e.lastName),n.createElement("td",null,e.username))))))});var G=Object(l.c)(e=>e.login,I)(e=>{const{token:t,setToken:a}=F();return t?n.createElement("div",null,n.createElement(W,null),n.createElement("header",null,n.createElement(A.a,{className:"navbar-expand-sm navbar-toggleable-sm border-bottom box-shadow mb-3",light:!0},n.createElement(D.a,null,n.createElement(U.a,{className:"mr-2"}),n.createElement(R.a,{className:"d-sm-inline-flex flex-sm-row-reverse",navbar:!0},n.createElement("ul",{className:"navbar-nav flex-grow"},n.createElement(j.a,null,n.createElement(L.a,{tag:B.a,className:"text-dark",to:"/login",onClick:()=>{a(null),e.reset()}},"Log out")))))))):n.createElement(_.a,{to:"/login"})}),M=a(128),J=a(138),V=a(135),z=a(131),X=a(133),H=a(134),K=a(139),Q=a(136);const Y=Object(M.a)(e=>Object(J.a)({container:{display:"flex",flexWrap:"wrap",width:400,margin:"".concat(e.spacing(0)," auto")},signupBtn:{marginTop:e.spacing(2),flexGrow:1},header:{textAlign:"center",background:"#212121",color:"#fff"},card:{marginTop:e.spacing(10)}}));var Z=Object(l.c)(e=>e.signup,{setFirstname:e=>({type:"SET_FIRSTNAME",payload:e}),setLastname:e=>({type:"SET_LASTNAME",payload:e}),setUsername:e=>({type:"SET_USERNAME",payload:e}),setPassword:e=>({type:"SET_PASSWORD",payload:e}),setIsButtonDisabled:e=>({type:"SET_BUTTON_DISABLED",payload:e}),signupSuccess:e=>({type:"SIGNUP_SUCCESS",payload:e}),signupFailed:e=>({type:"SIGNUP_FAILED",payload:e}),setIsError:e=>({type:"SET_ERROR",payload:e}),reset:()=>({type:"RESET"})})(e=>{const t=Y(),{token:a,setToken:s}=F();let l=Object(_.f)();Object(n.useEffect)(()=>{e.reset()},[]),Object(n.useEffect)(()=>{e.firstname.trim()&&e.lastname.trim()&&e.username.trim()&&e.password.trim()?e.setIsButtonDisabled(!1):e.setIsButtonDisabled(!0)},[e.firstname,e.lastname,e.username,e.password]);const o=()=>{!function(e,t,a,n,r,s){let l=JSON.stringify({firstName:e,lastName:t,username:a,password:n});N(h,null,l,r,s)}(e.firstname,e.lastname,e.username,e.password,t=>{e.signupSuccess(b),l.push("/login"),e.reset()},t=>{e.signupFailed((409===t.status?S:T)+t.message)})},c=t=>{13!==t.keyCode&&13!==t.which||e.isButtonDisabled||o()};return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(z.a,{className:t.card},r.a.createElement(K.a,{className:t.header,title:"Sign Up"}),r.a.createElement(X.a,null,r.a.createElement("div",null,r.a.createElement(V.a,{fullWidth:!0,id:"firstname",type:"text",label:"First Name",placeholder:"First Name",margin:"normal",onChange:t=>{e.setFirstname(t.target.value)},onKeyPress:c}),r.a.createElement(V.a,{fullWidth:!0,id:"lastname",type:"text",label:"Last Name",placeholder:"Last Name",margin:"normal",onChange:t=>{e.setLastname(t.target.value)},onKeyPress:c}),r.a.createElement(V.a,{error:e.isError&&e.helperText.includes(S),fullWidth:!0,id:"username",type:"email",label:"Username",placeholder:"Username",margin:"normal",helperText:e.helperText.includes(S)&&e.helperText,onChange:t=>{e.setUsername(t.target.value)},onKeyPress:c}),r.a.createElement(V.a,{error:e.isError&&e.helperText.includes(T),fullWidth:!0,id:"password",type:"password",label:"Password",placeholder:"Password",margin:"normal",helperText:e.helperText.includes(T)&&e.helperText,onChange:t=>{e.setPassword(t.target.value)},onKeyPress:c}))),r.a.createElement(H.a,null,r.a.createElement(Q.a,{variant:"contained",size:"large",color:"secondary",className:t.signupBtn,onClick:o,disabled:e.isButtonDisabled},"Sign Up"))))});const q=Object(M.a)(e=>Object(J.a)({container:{display:"flex",flexWrap:"wrap",width:400,margin:"".concat(e.spacing(0)," auto")},loginBtn:{marginTop:e.spacing(2),flexGrow:1},header:{textAlign:"center",background:"#212121",color:"#fff"},card:{marginTop:e.spacing(10)}}));var $=Object(l.c)(e=>e.login,I)(e=>{const t=q(),{token:a,setToken:s}=F();let l=Object(_.f)();Object(n.useEffect)(()=>{e.reset()},[]),Object(n.useEffect)(()=>{e.username.trim()&&e.password.trim()?e.setIsButtonDisabled(!1):e.setIsButtonDisabled(!0)},[e.username,e.password]);const o=()=>{!function(e,t,a,n){let r=JSON.stringify({username:e,password:t});N(E,null,r,a,n,u&&"shirley"===e&&"test"===t?{id:1,username:"shirley",firstName:"Shirley",lastName:"ZHANG",token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IjEiLCJuYmYiOjE2MzgxMDE5NjEsImV4cCI6MTYzODcwNjc2MSwiaWF0IjoxNjM4MTAxOTYxfQ.rQUJfHDvAE7rnyF8QoBXh8yk7kI3XJsehN_5cfcHV9k"}:null)}(e.username,e.password,t=>{e.loginSuccess(f),s(t),l.push("/home")},()=>{e.loginFailed(y),s(null)})},c=t=>{13!==t.keyCode&&13!==t.which||e.isButtonDisabled||o()};return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(z.a,{className:t.card},r.a.createElement(K.a,{className:t.header,title:"Login App"}),r.a.createElement(X.a,null,r.a.createElement("div",null,r.a.createElement(V.a,{error:e.isError,fullWidth:!0,id:"username",type:"email",label:"Username",placeholder:"Username",margin:"normal",onChange:t=>{e.setUsername(t.target.value)},onKeyPress:c}),r.a.createElement(V.a,{error:e.isError,fullWidth:!0,id:"password",type:"password",label:"Password",placeholder:"Password",margin:"normal",helperText:e.helperText,onChange:t=>{e.setPassword(t.target.value)},onKeyPress:c}))),r.a.createElement(H.a,null,r.a.createElement(Q.a,{variant:"contained",size:"large",color:"secondary",className:t.loginBtn,onClick:o,disabled:e.isButtonDisabled},"Login"))))}),ee=(a(92),()=>n.createElement(P,null,n.createElement(_.b,{exact:!0,path:["/","/home","/index.html"],component:G}),n.createElement(_.b,{exact:!0,path:"/login",component:$}),n.createElement(_.b,{path:"/signup",component:Z}),n.createElement(_.b,{path:"/fetch-data/:startDateIndex?",component:W})));const te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}const ne=document.getElementsByTagName("base")[0].getAttribute("href"),re=Object(c.a)({basename:ne}),se=function(e,t){const a=[m.a,Object(d.a)(e)],n=Object(i.c)({...v,router:Object(o.b)(e)}),r=[],s="undefined"===typeof window?null:window;return s&&s.__REDUX_DEVTOOLS_EXTENSION__&&r.push(s.__REDUX_DEVTOOLS_EXTENSION__()),Object(i.e)(n,t,Object(i.d)(Object(i.a)(...a),...r))}(re);s.render(n.createElement(l.a,{store:se},n.createElement(o.a,{history:re},n.createElement(ee,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");te?function(e){fetch(e).then(t=>{const a=t.headers.get("content-type");404===t.status||a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):ae(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e):ae(e)})}}()}},[[73,1,2]]]);
//# sourceMappingURL=main.b7ccafa0.chunk.js.map